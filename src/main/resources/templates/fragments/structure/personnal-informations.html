<div id="personal-data" th:fragment="personnal-informations">
    <h3 class="title">
        Informations Personnelles
        <a href="javascript: editOrCancel();">
            <i id="edit-button" class="fas fa-edit"></i>
        </a>
    </h3>
    <form id="personal-data-form" th:object="${user}" th:action="@{/usager/update-user}" method="post">
        <input type="text" th:field="*{firstname}" class="personal-data-input form-control bg-input mb-3" readonly />
        <input type="text" th:field="*{lastname}" class="personal-data-input form-control bg-input mb-3" readonly />
        <input type="email" th:field="*{email}" class="personal-data-input form-control bg-input mb-3" readonly />
        <input type="text" th:field="*{adress}" class="personal-data-input form-control bg-input mb-3" readonly />
        <input type="submit" id="personal-data-submit" class="btn btn-outline-lightbrown" style="display: none"/>
    </form>

    <script>
        function toggleEditButton() {
            var editButton = document.querySelector("#edit-button");
            if (editButton.classList.contains("fa-edit")) {
                editButton.classList.remove("fa-edit");
                editButton.classList.add("fa-times");
            } else {
                editButton.classList.remove("fa-times");
                editButton.classList.add("fa-edit");
            }
        }

        function toggleInput() {
            $('.personal-data-input').each(function(){
                var input = $(this);
                input.is("[readonly]") ? input.removeAttr("readonly") : input.attr("readonly", "readonly");
            });

            var submitButton = $('#personal-data-submit');
            submitButton.toggle('style');
            $("#personal-data-form")[0].reset();
            /*if (submitButton.is("[hidden]")) {
                submitButton.removeAttr("hidden");
            } else {
                submitButton.attr("hidden");
                $("#personal-data-form")[0].reset();
            }*/
        }

        function editOrCancel() {
            toggleEditButton();
            toggleInput();
        }
    </script>
</div>