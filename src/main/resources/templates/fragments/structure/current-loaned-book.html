<div id="current-loan" th:fragment="current-loaned-book">
    <h3>Current loan</h3>
    <table>
        <thead>
        <tr>
            <th>Title</th>
            <th>Library</th>
            <th>Quantity</th>
            <th>Expiry Date</th>
            <th>Status</th>
            <th>Buttons</th>
        </tr>
        </thead>
        <tbody>
        <tr th:if="${errorMessage != null}" th:text="${errorMessage}"></tr>
        <tr th:each="loan: ${loans}" th:unless="${loan.status.equals('RETURNED')}" th:data="${loan.book.reference}" onclick="getBookDetailView(this.getAttribute('data'));">
            <td th:text="${loan.book.title}"></td>
            <td th:text="${loan.library.name}" data-toggle="tooltip" data-placement="bottom" th:title="${loan.library.address}"></td>
            <td th:text="${loan.quantity}"></td>
            <td th:text="${loan.expiryDate}"></td>
            <td th:text="${loan.status}"></td>
            <td>
                <a class="btn btn-outline-secondary"
                   th:href="@{/loan/extend(
                                libraryId=${loan.library.numberRef},
                                bookReference=${loan.book.reference},
                                borrowingDate=${loan.borrowingDate}
                           )}">
                    Extend
                </a>
                <a class="btn btn-outline-secondary"
                   th:href="@{/loan/return(
                                libraryId=${loan.library.numberRef},
                                bookReference=${loan.book.reference},
                                borrowingDate=${loan.borrowingDate}
                           )}">
                    Return
                </a>
            </td>
        </tr>
        </tbody>
    </table>
</div>